(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c6d25dfc"],{"1dde":function(t,e,c){var n=c("d039"),o=c("b622"),a=c("2d00"),l=o("species");t.exports=function(t){return a>=51||!n((function(){var e=[],c=e.constructor={};return c[l]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"62b3":function(t,e,c){"use strict";c.r(e);var n=c("7a23"),o={key:0,class:"loading"},a=Object(n["g"])("div",{class:"loadIcon spinner-border",role:"status"},[Object(n["g"])("span",{class:"visually-hidden"},"Loading...")],-1),l={key:1,class:"cartList mb-5 mt-4"},d=Object(n["g"])("h2",{class:"text-center"},"購物車列表",-1),s={class:"d-flex justify-content-end mb-2"},r={class:"productList table table-striped table-hover"},i=Object(n["g"])("thead",null,[Object(n["g"])("tr",null,[Object(n["g"])("th",{width:"5%",scope:"col"},"刪除"),Object(n["g"])("th",{width:"45%",scope:"col",class:"productTitle"},"品名"),Object(n["g"])("th",{width:"15%",scope:"col"},"單價"),Object(n["g"])("th",{width:"20%",scope:"col"},"數量/單位"),Object(n["g"])("th",{width:"15%",scope:"col"},"總價")])],-1),u=Object(n["g"])("span",{class:"material-icons"},"delete_forever",-1),b={class:"productTitle"},p={class:"qtyArea d-flex align-items-center"},O=Object(n["g"])("span",{class:"material-icons fs-3"},"arrow_left",-1),h={class:"productQty"},j=Object(n["g"])("span",{class:"material-icons fs-3"},"arrow_right",-1),f=Object(n["g"])("td",null,null,-1),g=Object(n["g"])("td",null,null,-1),y=Object(n["g"])("td",null,null,-1),v=Object(n["g"])("td",{class:"totalText"},"總金額",-1),C={class:"totalText"},m={class:"d-flex justify-content-center"},k={key:2,class:"noCart py-4"},M=Object(n["g"])("h2",{class:"text-center"},"購物車列表",-1),x={class:"noCartContent py-4"},w=Object(n["g"])("h3",null,"購物車內沒有商品",-1),A=Object(n["f"])("回到產品列表");function D(t,e,c,D,P,$){var S=this,_=Object(n["x"])("router-link"),L=Object(n["x"])("deleteModal");return Object(n["s"])(),Object(n["d"])(n["a"],null,[t.getProductLoading?(Object(n["s"])(),Object(n["d"])("div",o,[a])):Object(n["e"])("",!0),0!==P.cartData.final_total?(Object(n["s"])(),Object(n["d"])("div",l,[d,Object(n["g"])("div",s,[Object(n["g"])("button",{type:"button",class:"btn btn-outline-danger",onClick:e[1]||(e[1]=function(e){return $.deleteProduct("deleteAll",t.item)})},"清空購物車")]),Object(n["g"])("table",r,[i,Object(n["g"])("tbody",null,[(Object(n["s"])(!0),Object(n["d"])(n["a"],null,Object(n["w"])(P.cartData.carts,(function(t){return Object(n["s"])(),Object(n["d"])("tr",{class:"align-middle",key:t.id},[Object(n["g"])("td",null,[Object(n["g"])("button",{type:"button",class:"deleteCartOne d-flex align-items-center",onClick:function(e){return $.deleteProduct("deleteOne",t)}},[u],8,["onClick"])]),Object(n["g"])("td",b,Object(n["A"])(t.product.title),1),Object(n["g"])("td",null,Object(n["A"])(t.product.price),1),Object(n["g"])("td",null,[Object(n["g"])("div",p,[Object(n["g"])("button",{type:"button",class:"mx-0 p-0 pt-1",onClick:function(e){return $.changeQty("reduce",t,t.qty)}},[O],8,["onClick"]),Object(n["g"])("span",h,Object(n["A"])(t.qty),1),Object(n["g"])("button",{type:"button",class:"mx-0 p-0 pt-1",onClick:function(e){return $.changeQty("add",t,t.qty)}},[j],8,["onClick"]),Object(n["f"])(" "+Object(n["A"])(t.product.unit),1)])]),Object(n["g"])("td",null,Object(n["A"])(t.final_total),1)])})),128))]),Object(n["g"])("tfoot",null,[Object(n["g"])("tr",null,[f,g,y,v,Object(n["g"])("td",C,Object(n["A"])(P.cartData.final_total),1)])])]),Object(n["g"])("div",m,[Object(n["g"])("button",{type:"button",class:"btn btn-primary px-4 fw-bold",onClick:e[2]||(e[2]=function(t){return S.$router.push("/customerForm")})},"結帳")])])):(Object(n["s"])(),Object(n["d"])("div",k,[M,Object(n["g"])("div",x,[w,Object(n["g"])(_,{to:"/products",class:"btn btn-primary"},{default:Object(n["F"])((function(){return[A]})),_:1})])])),Object(n["g"])(L,{ref:"deleteModal",onGetCartData:$.getCartData},null,8,["onGetCartData"])],64)}c("99af");var P=c("ec05"),$=c("1940"),S=c.n($),_={data:function(){return{cartData:{},deleteModal:{},getCartLoading:!0}},methods:{getCartData:function(){var t=this;this.getProductLoading=!0;var e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("jun0527","/cart");this.$http.get(e).then((function(e){e.data.success&&(t.cartData=e.data.data,t.getProductLoading=!1)})).catch((function(t){console.dir(t)}))},changeQty:function(t,e,c){var n=this,o=c;if("reduce"===t){if(1===c)return void this.deleteProduct("deleteOne",e);o-=1}else o+=1;var a={data:{product_id:e.product_id,qty:o}},l="".concat("https://vue3-course-api.hexschool.io/","api/").concat("jun0527","/cart/").concat(e.id);this.$http.put(l,a).then((function(t){t.data.success?(S()("".concat(e.product.title,"購買數量更改為").concat(o)),n.getCartData()):S()("".concat(e.product.title,"購買數量更改失敗！"))})).catch((function(t){console.dir(t)}))},deleteProduct:function(t,e){this.$refs.deleteModal.deleteCart=e,this.$refs.deleteModal.deleteStatus=t,this.$refs.deleteModal.openModal()}},components:{deleteModal:P["a"]},created:function(){this.getCartData()}};_.render=D;e["default"]=_},8418:function(t,e,c){"use strict";var n=c("c04e"),o=c("9bf2"),a=c("5c6c");t.exports=function(t,e,c){var l=n(e);l in t?o.f(t,l,a(0,c)):t[l]=c}},"99af":function(t,e,c){"use strict";var n=c("23e7"),o=c("d039"),a=c("e8b5"),l=c("861d"),d=c("7b0b"),s=c("50c4"),r=c("8418"),i=c("65f0"),u=c("1dde"),b=c("b622"),p=c("2d00"),O=b("isConcatSpreadable"),h=9007199254740991,j="Maximum allowed index exceeded",f=p>=51||!o((function(){var t=[];return t[O]=!1,t.concat()[0]!==t})),g=u("concat"),y=function(t){if(!l(t))return!1;var e=t[O];return void 0!==e?!!e:a(t)},v=!f||!g;n({target:"Array",proto:!0,forced:v},{concat:function(t){var e,c,n,o,a,l=d(this),u=i(l,0),b=0;for(e=-1,n=arguments.length;e<n;e++)if(a=-1===e?l:arguments[e],y(a)){if(o=s(a.length),b+o>h)throw TypeError(j);for(c=0;c<o;c++,b++)c in a&&r(u,b,a[c])}else{if(b>=h)throw TypeError(j);r(u,b++,a)}return u.length=b,u}})},ec05:function(t,e,c){"use strict";var n=c("7a23"),o={class:"modal fade",ref:"deleteModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},a={class:"modal-dialog"},l={class:"modal-content"},d={class:"modal-header bg-dark"},s=Object(n["g"])("h5",{class:"modal-title text-white"},"刪除確認",-1),r={class:"modal-body"},i={key:0},u={key:1},b={key:2},p={key:3},O={key:4},h={class:"modal-footer"};function j(t,e,c,j,f,g){return Object(n["s"])(),Object(n["d"])("div",o,[Object(n["g"])("div",a,[Object(n["g"])("div",l,[Object(n["g"])("div",d,[s,Object(n["g"])("button",{type:"button",class:"btn-close btn-close-white",onClick:e[1]||(e[1]=function(){return g.closeModal&&g.closeModal.apply(g,arguments)})})]),Object(n["g"])("div",r,["deleteOne"===f.deleteStatus?(Object(n["s"])(),Object(n["d"])("p",i,"確定要刪除購物車中"+Object(n["A"])(f.deleteCart.product.title)+"？",1)):"deleteAll"===f.deleteStatus?(Object(n["s"])(),Object(n["d"])("p",u,"確定要清空購物車？")):"deleteProduct"===f.deleteStatus?(Object(n["s"])(),Object(n["d"])("p",b,"確定要刪除商品"+Object(n["A"])(f.deleteProduct.title)+"？",1)):"deleteModal"===f.deleteStatus?(Object(n["s"])(),Object(n["d"])("p",p,"確定要刪除訂單"+Object(n["A"])(f.deleteProduct.title)+"？",1)):(Object(n["s"])(),Object(n["d"])("p",O,"確定要刪除"+Object(n["A"])(f.deleteCouponData.title)+"？",1))]),Object(n["g"])("div",h,[Object(n["g"])("button",{type:"button",class:"btn btn-secondary",onClick:e[2]||(e[2]=function(){return g.closeModal&&g.closeModal.apply(g,arguments)})},"取消"),"deleteOne"===f.deleteStatus?(Object(n["s"])(),Object(n["d"])("button",{key:0,type:"button",class:"btn btn-danger",onClick:e[3]||(e[3]=function(){return g.deleteOne&&g.deleteOne.apply(g,arguments)})},"刪除")):"deleteAll"===f.deleteStatus?(Object(n["s"])(),Object(n["d"])("button",{key:1,type:"button",class:"btn btn-danger",onClick:e[4]||(e[4]=function(){return g.deleteAll&&g.deleteAll.apply(g,arguments)})},"清空購物車")):"deleteProduct"===f.deleteStatus?(Object(n["s"])(),Object(n["d"])("button",{key:2,type:"button",class:"btn btn-danger",onClick:e[5]||(e[5]=function(){return g.deleteOneProduct&&g.deleteOneProduct.apply(g,arguments)})},"刪除")):"deleteModal"===f.deleteStatus?(Object(n["s"])(),Object(n["d"])("button",{key:3,type:"button",class:"btn btn-danger",onClick:e[6]||(e[6]=function(){return g.deleteOrder&&g.deleteOrder.apply(g,arguments)})},"刪除")):(Object(n["s"])(),Object(n["d"])("button",{key:4,type:"button",class:"btn btn-danger",onClick:e[7]||(e[7]=function(){return g.deleteCoupon&&g.deleteCoupon.apply(g,arguments)})},"刪除"))])])])],512)}c("99af");var f=c("1940"),g=c.n(f),y=c("7b17"),v={data:function(){return{deleteModal:{},deleteStatus:"",deleteCart:[],deleteProduct:{},deleteOrderId:"",deleteCouponData:{}}},methods:{openModal:function(){this.deleteModal.show()},closeModal:function(){this.deleteModal.hide(),this.deleteStatus="",this.deleteCart=[],this.deleteProduct={},this.deleteOrderId="",this.deleteCouponData={}},deleteOne:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("jun0527","/cart/").concat(this.deleteCart.id);this.$http.delete(e).then((function(e){e.data.success?(g()("成功刪除購物車中".concat(t.deleteCart.product.title,"！")),t.$emit("getCartData"),t.closeModal()):(g()("購物車刪除失敗！"),t.closeModal())})).catch((function(t){console.dir(t)}))},deleteAll:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("jun0527","/carts");this.$http.delete(e).then((function(e){e.data.success?(g()("清空購物車成功！"),t.$emit("getCartData"),t.closeModal()):g()("清空購物車失敗！")})).catch((function(t){console.dir(t)}))},deleteOneProduct:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("jun0527","/admin/product/").concat(this.deleteProduct.id);this.$http.delete(e).then((function(e){e.data.success?(g()("商品刪除成功！"),t.closeModal(),t.$emit("getProducts")):(g()("商品刪除失敗！"),t.closeModal())})).catch((function(t){console.dir(t)}))},deleteOrder:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("jun0527","/admin/order/").concat(this.deleteOrderId);this.$http.delete(e).then((function(e){e.data.success?(g()("訂單刪除成功！"),t.closeModal(),t.$emit("getOrder")):(g()("訂單刪除失敗！"),t.closeModal())})).catch((function(t){console.dir(t)}))},deleteCoupon:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("jun0527","/admin/coupon/").concat(this.deleteCouponData.id);this.$http.delete(e).then((function(e){e.data.success?(g()("優惠券刪除成功！"),t.closeModal(),t.$emit("getCouponsData")):(g()("優惠券刪除失敗！"),t.closeModal())})).catch((function(t){console.dir(t)}))}},mounted:function(){this.deleteModal=new y["a"](this.$refs.deleteModal,{backdrop:"static",keyboard:!1})}};v.render=j;e["a"]=v}}]);
//# sourceMappingURL=chunk-c6d25dfc.e4b33d7a.js.map